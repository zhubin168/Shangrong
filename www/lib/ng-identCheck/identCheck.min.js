!function(){"use strict";var r=angular.module("check.identCheck",[]);r.factory("$identCheck",["$q","$window",function(r,n){function e(r){var n=/(^\d{15}$)|(^\d{17}(\d|X)$)/;return n.test(r)!==!1}function t(r){var n=r.substr(0,2);return void 0!==d[n]}function a(r){var n,e,t,a,f,o=r.length;if(15===o){var d=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/;return n=r.match(d),e=n[2],t=n[3],a=n[4],f=new Date(parseInt(e),parseInt(t),parseInt(a)),u(f)}if(18===o){var s=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/;return n=r.match(s),e=n[2],t=n[3],a=n[4],f=new Date(parseInt(e),parseInt(t),parseInt(a)),u(f)}return!1}function u(r){var n=new Date;return r<n}function f(r){r=o(r);var n=r.length;if(18===n){var e,t=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),a=new Array("1","0","X","9","8","7","6","5","4","3","2"),u=0;for(e=0;e<17;e++)u+=r.substr(e,1)*t[e];var f=a[u%11];return f===r.substr(17,1)}return!1}function o(r){if(15===r.length){var n,e=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),t=new Array("1","0","X","9","8","7","6","5","4","3","2"),a=0;for(r=r.substr(0,6)+"19"+r.substr(6,r.length-6),n=0;n<17;n++)a+=r.substr(n,1)*e[n];return r+=t[a%11]}return r}var d={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};return{checkIDCard:function(r){return null==r||""==r||"undefined"==typeof r?{flag:!1,error:"请输入身份证号码"}:e(r)===!1?{flag:!1,error:"身份证号码不正确"}:t(r)===!1?{flag:!1,error:"身份证号码省份不正确"}:a(r)===!1?{flag:!1,error:"身份证号码生日不正确"}:f(r)===!1?{flag:!1,error:"身份证校验位不正确"}:{flag:!0,error:"成功"}}}}])}();