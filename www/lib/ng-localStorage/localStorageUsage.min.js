!function(){"use strict";var e=angular.module("localStorageUsage",[]);e.factory("$localStorageUsage",["$q","$window",function(e,t){function r(e){var t=e.split(l),r={};return r.realkey=t[1],r.expires=t[2]||"",r}function a(e,t){var r=+new Date;return!!t&&r>parseInt(t,10)}var o={},n=/^localstorage\_\_\_(.*)+\_\_\_\d*$/,i="localstorage",l="___";return{clearAll:function(){for(var e in t.localStorage)n.test(e)&&t.localStorage.removeItem(e);return this},clear:function(e){for(var r in t.localStorage)r.indexOf(e)>0||n.test(r)&&t.localStorage.removeItem(r);return this},removeItem:function(e){var r=o[e];return r&&t.localStorage.removeItem(r.key),this},getItem:function(e){var r=o[e];return r?a(e,r.expires)?null:t.localStorage[r.key]:null},setItem:function(e,r,a){if(!e)return this;a=a||0,this._key=e;var n=+new Date,s=i+l+e+l+(a?1e3*a*60*60*24+n:"");return this.removeItem(e),t.localStorage.setItem(s,r),o[e]={key:s,expires:a?1e3*a*60*60*24+n:""},this},expires:function(e){if(!e)return this;var r=this._key,a=o[r]||{},n=t.localStorage[a.key];+new Date;return r?(this.removeItem(r),this.setItem(r,n,e),this):this},initCheck:function(){var e;for(var i in t.localStorage)if(n.test(i)){if(e=r(i),a(e.realkey,e.expires)){t.localStorage.removeItem(i);continue}o[e.realkey]={key:i,expires:e.expires}}}}}])}();